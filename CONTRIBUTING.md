# Contributing

## Styleguides

### Git Commit Messages

Ideal Commit Message (adapted from the [git-scm book](https://git-scm.com/book/en/v2/Distributed-Git-Contributing-to-a-Project)):

Must be one of the following:

Breaking: Adds a major release to production branch with possible breaking changes (major) (EX: Breaking: Change global state structure)

Fix: A bug fix (patch) (EX: Fix: Add fix to mobile bug)

Update: An update to an existing feature (minor) (EX: Update: Add images to news digest)

New: A new feature or component (minor) (EX: New: Add new feature called Blog)

```
Capitalized, short (72 chars or less) summary

More detailed explanatory text, if necessary.  Wrap the lines to about
72 characters or so.  In some contexts, the first line is treated as
the subject of an email and the rest of the text as the body.  The
blank line separating the summary from the body is critical (unless you
omit the body entirely); tools like rebase can get confused if you run
the two together.

Write your commit message in the imperative: "Fix bug" and not
"Fixed bug" or "Fixes bug."  This convention matches up with commit
messages generated by commands like git merge and git revert.

Reference any GitHub issues or pull requests in the body. Similarly, if
you are wanting to associate this commit to a specific Clubhouse story,
you should include the story id in the form of [ch####].

Further paragraphs come after blank lines.

- Bullet points are okay, too

- A hyphen or asterisk is used for the bullet, followed by a
  single space, with blank lines in between

- Use a hanging indent
```

### Typescript

All Typescript code should adhere to [TypeScript Style Guide and Coding Conventions](https://basarat.gitbook.io/typescript/styleguide)

## Issues and Pull Requests

When creating Issues or Pull Requests, fill in the templates if present
while making use of [GitHub Flavored Markdown](https://guides.github.com/features/mastering-markdown/).
If the Pull Request is still a work-in-progress, submit it as a draft
to mark it as not yet ready for merging. Pull Requests are only merged
after all CI flows have completed successfully.

All Pull Requests need to include a new entry in the CHANGELOG under
the appropriate category with a description of the change, a link to
the PR, and the name of the author.

### Labels

When creating an Issue or Pull Request, assign the appropriate labels
at the time of creation.

| Label name      | Description                                |
| --------------- | ------------------------------------------ |
| `bug`           | Something isn't working                    |
| `documentation` | Improvements or additions to documentation |
| `feature`       | New feature                                |

## Branching

The repo has at least two active branches at any one time. The `master`
branch and the `develop` branch. The `master` branch represents the current
production version of the code and should only be merged into from
`hotfix` and `release` branches. The `develop` branch is where new features
and non-critical bug fixes are staged before being staged for release.

### Keep Branches Small

Branches should be kept as small as possible. Always opt for multiple
smaller changes leading up to a larger change than a single huge branch
touching many things. Branches become larger and more complex the
longer they exist. These branches quickly grow to be too large for any
one developer to properly understand, _including the author_. Smaller
branches are easy for both the author and reviewer to understand, and
by being more focused, bugs introduced are more likely to be noticed.

If the change that you are planning to make is very large and complex,
try working with other developers to break down the problem into more
manageable steps leading up to the end result you are wanting to
achieve. Almost every change has steps of refactoring existing code or
building smaller independent components which work together to
accomplish the goal. If you do not think that your problem can be split
into smaller independent changes, bring the problem up with the team
and make sure everyone agrees that it cannot be done before you create
a large change in one branch.

### Creating Branches

When creating branches, ensure that the base of the new branch is the
branch that you will eventually want to merge into. (Most of the time
this will be `dev`). The branch name should start with a token from the
table below followed by a forward slash and a short kebab-case
description of the branch's purpose.

| Token      | Usage                                                                            |
| ---------- | -------------------------------------------------------------------------------- |
| `bug`      | Bug fix                                                                          |
| `feature`  | Adding a new feature or modifying an existing one                                |
| `breaking` | Adds a major release to production branch with possible breaking changes (major) |
| `fix`      | A bug fix (patch)                                                                |
| `new`      | A new feature or component (minor)                                               |
| `update`   | An update to an existing feature (minor)                                         |
| `doc`      | Only documentation is being modified                                             |
| `hotfix`   | A bug fix based off `master` to patch a critical bug                             |
| `release`  | A staged release that should only have bug fixes merged                          |
| `misc`     | Any miscellaneous changes that do not fit under other tokens                     |
| `junk`     | Throwaway branch for experiments                                                 |

For example, if Tim Apple is fixing a bug that causes the software to
become sentient and desire to destroy all humans, he might make a
branch named `bug/remove-sentience`.

### Hotfix Branches

When a critical bug makes it into production, it should be fixed and
released as soon as possible using a hotfix branch. The hotfix branch
should be based off of `master` and merged back in to `master` as a
patch release.

### Release Branches

Before the `develop` branch is released to production, it is staged to a
release branch with a [semantic version](https://semver.org/). Once
staged, the branch should only have bug fixes merged into it. After
being tested and having all bugs patched, it can be released by merging
it into `master`. If any bugs were squashed in the release branch, the
release branch should be merged into `develop` upon release so that `develop`
gets the same fixes.
